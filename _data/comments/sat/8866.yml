id: 8866
date: 2011-05-07 14:00:54 -0400
author: heishe
parent: sat
avatar: http://1.gravatar.com/avatar/15ca0d8471100d12247a315d66f91206?s=96&d=mm&r=g
message: "<p>Oh damnit, another comment (sorry for that, but I can't edit).</p>\n<p>I actually didn't delete anything, but the XHTML tags have problems with the smaller than and bigger than sign :) I'm going to post all the relevant code again, since the other code pieces also contain these signs:</p>\n<pre>\n	public static Vector2f doCollideEx(Box a, Box b)\n	{		\n		Projection2D p1,p2;\n		float overlap = Float.MAX_VALUE;\n		Vector2f axis = new Vector2f(0.0f,0.0f);\n		\n		Vector2f[] edge_normals = a.getEdgeNormals();\n		for(int i=0;i<2;i++)\n		{\n			p1 = a.projectOnto(edge_normals[i]);\n			p2 = b.projectOnto(edge_normals[i]);\n			if(!p1.overlaps(p2))\n				return new Vector2f(0.0f,0.0f);\n			else\n			{\n				if(p1.getOverlap(p2)<overlap)\n				{\n					overlap = p1.getOverlap(p2);\n					axis = edge_normals[i];\n				}\n			}\n		}\n		\n		edge_normals = b.getEdgeNormals();\n		for(int i=0;i<2;i++)\n		{\n			p1 = a.projectOnto(edge_normals[i]);\n			p2 = b.projectOnto(edge_normals[i]);\n		\n			if(!p1.overlaps(p2))\n				return new Vector2f(0.0f,0.0f);\n			else\n			{\n				if(p1.getOverlap(p2)<overlap)\n				{\n					overlap = p1.getOverlap(p2);\n					axis = edge_normals[i];\n				}\n			}\n		}\n		\n		//test if translation vector is pointing away from box b\n		//and if so,  point the vector in its opposite direction\n		Vector2f ba = Vector2f.subtract(a.getCenter(), b.getCenter());\n		if(axis.dotProduct(ba) < 0.0f)\n			axis.negate();\n		\n		return Vector2f.multiply(axis,overlap);\n	}\n\n\n	public Projection2D projectOnto(Vector2f axis)\n	{\n		float min = Float.MAX_VALUE;\n		float max = Float.MIN_VALUE;\n		\n		for(int i=0;i max)\n				max = dot;\n			if(dot < min)\n				min = dot;\n		}\n		return new Projection2D(min,max);\n	}\n\n	public boolean overlaps(Projection2D b)\n	{\n		return (!(b.max < this.min || this.max < b.min));\n	}\n	\n	public float getOverlap(Projection2D b)\n	{\n		return (this.max < b.max) ? this.max - b.min : b.max - this.min;\n	}\n</pre>"